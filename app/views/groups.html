<div class="cl_content">

    <!-- TOOLBAR CON LOGO TRIPBOX Y USUARIO -->
    <nav class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://localhost:9000/#/groups">Tripbox</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                </ul>

                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown">{{ infoUser.name }} {{ infoUser.lastName }} <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a ng-click="logoutUser()">Salir de la cuenta</a>
                            </li>

                        </ul>
                    </li>

                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>

    <!-- Se esconde si no se muestra el tutorial -->
    <div class="fondo" ng-hide="groupsTuto == false">

    </div>

    <!-- Se muestra si no se muestra el tutorial -->
    <div ng-show="groupsTuto == false">

        <div class="row">
            <div ng-repeat="group in groups">
                <div class="card-wrapper">
                    <div class="card group" style="background-image: url({{group.imagePath}})" ng-click="goToGroup(group.id)">
                        <div class="bubble">
                            <i class="fa fa-group"></i>
                        </div>
                        <div class="grey-box">
                            <div class="caption">
                                <h2>{{ group.name}}</h2>
                            </div>
                            <div class="buttons-wrapper">
                                <div class="card-btn edit-group" ng-click="editGroup(group.id, group.name, group.description); $event.stopPropagation()"><i class="fa fa-edit"></i>
                                </div>
                                <div class="card-btn unfollow-group" ng-click="unFollowGroup(group.id, group.name); $event.stopPropagation()"><i class="fa fa-trash-o"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <div class="card-wrapper">
                <div class="card group create" data-toggle="modal" data-target="#CrearGrupo">
                    <i class="fa fa-plus-circle"></i>
                    <h2>Crea un grupo</h2>
                </div>
            </div>



        </div>
        
    </div>
    <!-- Se esconde si no se muestra el tutorial -->
    <div ng-hide="groupsTuto == false">
        <div id="tutorial">
            <div class="title-tutorial">
                <div>
                    <center>
                        <h1>¿Aún no tienes ningún grupo?
                            <br>¡Crea uno en Tripbox!</h1>
                    </center>
                </div>
            </div>

            <div class="tutorial">
                <div class="row-fluid">

                    <div class="col-md-2 col-md-offset-5">
                        <div class="fleche-left">
                            <img src="images/system/groups/flechas1/flechaleft.png" height="150" width="200" ondragstart="return false" onselectstart="return false" oncontextmenu="return false" />
                        </div>
                       
                        <div class="cardtuto">
                            <div class="thumbnail">
                                <div id="cardinfo">

                                    <center>

                                        <img src="images/groups/mas.jpg" alt="Image group" height="100%" width="100%" ondragstart="return false" onselectstart="return false" oncontextmenu="return false"/>Añadir grupo

                                    </center>

                                </div>
                                <div id="addgroup">

                                    <center>

                                        <button type="button" class="btn btn-primary btn-xs" data-toggle="modal" data-target="#CrearGrupo">
                                            <span class="glyphicon glyphicon-plus-sign" data-toggle="modal" data-target="#CrearGrupo"></span>
                                        </button>

                                    </center>
                                </div>
                            </div>
                        </div>
                        <div class="fleche-right">
                            <img src="images/system/groups/flechas1/flecharight.png" height="150" width="200" ondragstart="return false" onselectstart="return false" oncontextmenu="return false" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MENUS DESPLEGABLES -->

    <!-- MENU PARA CREAR GRUPO -->
    <div class="modal fade" id="CrearGrupo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">

                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>

                    <h4 class="modal-title" id="myModalLabel">Crea un nuevo grupo</h4>

                </div>
                <form name="formAddGroup" novalidate ng-submit="addGroupForm()">
                    <div class="modal-body">
                        <div class="input-group">

                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-pencil"></span>
                            </span>
                            <fieldset>
                                <input type="text" class="edit-group-name form-control" placeholder="Nombre del grupo (obligatorio)" name="nombre" ng-model="newGroup.name" ng-maxlength=7 required>
                            </fieldset>

                        </div>
                        <div class="error" ng-show="formAddGroup.nombre.$dirty && formAddGroup.nombre.$invalid">
                            <small class="error" ng-show="formAddGroup.nombre.$error.required">
                                El grupo necesita un nombre.
                            </small>
                        </div>
                        <small class="error" ng-show="formAddGroup.nombre.$error.maxlength">
                            El nombre no puede tener mas de 7 letras.
                        </small>
                        </br>
                        <div class="input-group">

                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-comment"></span>
                            </span>
                            <fieldset>
                                <input type="text" class="form-control" placeholder="Descripción del grupo" name="descripcion" ng-model="newGroup.description">
                            </fieldset>

                        </div>
                        </br>
                        <div class="input-group">

                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-picture"></span>
                            </span>
                                <div>
                                    <input type="file" data-file="param.file" ng-model="newGroup.fileP"/>
                                    <small>Sólo son validos ficheros JPEG</small>
                                    
<style>
                                    div.fileinputs {
                                        position: relative;
                                    }

                                    div.fakefile {
                                        position: absolute;
                                        top: 0px;
                                        left: 0px;
                                        z-index: 1;
                                    }

                                    input.file {
                                        position: relative;
                                        text-align: right;
                                        -moz-opacity:0 ;
                                        filter:alpha(opacity: 0);
                                        opacity: 0;
                                        z-index: 2;
                                    }
</style>
                                    <div class="fileinputs">
                                        <input type="file" class="file"/>
                                        <div class="fakefile">
                                            <input/>
                                            <button type="button" class="btn btn-primary" data-toggle="button">Single toggle</button>
                                        </div>
                                    </div>
                                </div>
                        </div>
                    </div>
                    <div class="modal-footer">

                        <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="cleanFormAddGroup()">Cancelar</button>

                        <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="addGroup(newGroup)" ng-disabled="formAddGroup.$invalid">Crear</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


<!-- MENU PARA ELIMINAR GRUPO -->
            
    <script type="text/ng-template" id="unFollowGroupModalContent.html">
    
        <div class="modal-header">
           
            <button type="button" class="close" ng-click="cancel()">&times;</button>
            <h4 class="modal-title" id="myModalLabel">Confirmar eliminación</h4>
        
        </div>
        <div class="modal-body">
            
            <div class="input-group">
               
                ¿Estás seguro de que quieres eliminar "{{groupName}}" definitivamente de tu lista de grupos?
            
            </div>

        </div>
        <div class="modal-footer">
            
            <button type="button" class="btn btn-default" ng-click="cancel()">Cancelar</button>
            <button type="button" class="btn btn-danger" ng-click="confirmUnFollow()">Abandonar</button>
            
        </div>
    
    </script>


    <!-- MENU PARA MODIFICAR GRUPO (EN DESARROLLO)-->

    <script type="text/ng-template" id="editGroupModalContent.html">
    
        <div class="modal-header">
    
            <button type="button" class="close" ng-click="cancel()">&times;</button>
            <h4 class="modal-title" id="myModalLabel">Edición de Grupo {{groupName}}</h4>
      
        </div>
        <form name="formModGroup" novalidate ng-submit="modGroupForm()">
        <div class="modal-body">
         
                <div class="input-group">

                    <span class="input-group-addon">
                        <span class="glyphicon glyphicon-pencil"></span>
                    </span>
                    <fieldset>
                        <input type="text" class="form-control" placeholder="Nombre del grupo" ng-model="groupName" name="nombre" ng-maxlength=7 required>
                    </fieldset>
                </div>
                
                    <small class="error" ng-show="formModGroup.nombre.$error.required">
                        El grupo necesita un nombre.
                    </small>
                
                <small class="error" ng-show="formModGroup.nombre.$error.maxlength">
                    El nombre no puede tener mas de 7 letras.
                </small>
                </br>

                <div class="input-group">                
                    <span class="input-group-addon">
                        <span class="glyphicon glyphicon-comment"></span>
                    </span>
                               
                    <fieldset> 
                        <input type="text" class="form-control" placeholder="Descripción del grupo" ng-model="groupDescription" name="descripcion">
                    </fieldset>
                    
                </div>
                </br>

                <div class="input-group">
                        
                    <span class="input-group-addon">
                        <span class="glyphicon glyphicon-picture"></span>
                    </span>
                        
                    <div>
                        <input type="file" data-file="param.file" ng-model="newGroup.fileP"/>
                        <small>Sólo son validos ficheros JPEG</small>
                    </div>
                    
                </div>

            </div>

            <div class="modal-footer">

                <button type="button" class="btn btn-default" ng-click="cancel()">Cancelar</button>
                <button type="button" class="btn btn-primary" ng-click="confirmEdit(groupName, groupDescription)" ng-disabled="formModGroup.$invalid">Editar</button>
        </div>
    </form>
    </script>

</div>