<div class="cl_content">

    <!-- TOOLBAR CON LOGO TRIPBOX Y USUARIO -->
    <nav class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://localhost:9000/#/groups">TripBox</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                </ul>

                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown">{{ infoUser.name }} {{ infoUser.lastName }} <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a>Salir de la cuenta</a>
                            </li>

                        </ul>
                    </li>

                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>

    <div class="fondo" ng-hide="groups.length != []">

    </div>

    <!-- Si ya hay algún grupo creado -->
    <div ng-show="groups.length != []">

        <!-- CARTA CON TODOS LOS GRUPOS DEL USUARIO -->
        <div class="row">
            <div ng-repeat="group in groups">
                <div class="col-md-2" color="blue">
                    <div class="thumbnail">

                        <!-- DATOS DE LA CARTA: IMAGEN, NOMBRE DEL GRUPO Y DESCRIPCIÓN -->

                        <center>

                            <div>
                                <a href="http://localhost:9000/#/groups/{{group.id}}">
                                    <img src="images/groups/default.jpg" alt="Image group" title="{{group.name}}" height="100%" width="100%" ondragstart="return false" onselectstart="return false" oncontextmenu="return false" />
                                </a>
                            </div>

                            <!--Falta implementacion Backend 
                            < No existe imagen >
                            <div ng-show="group.flagImage == 0">
                                <a href="http://localhost:9000/#/groups/{{group.id}}">
                                    <img src="images/groups/default.jpg" alt="Image group" title="{{group.name}}" height="100%" width="100%" ondragstart="return false" onselectstart="return false" oncontextmenu="return false" />
                                </a>
                            </div>

                            < Existe imagen >
                            <div ng-hide="group.flagImage == 1">
                                <a href="http://localhost:9000/#/groups/{{group.id}}">
                                    <img src="images/groups/{{group.id}}.jpg" alt="Image group" title="{{group.name}}" height="100%" width="100%" ondragstart="return false" onselectstart="return false" oncontextmenu="return false" />
                                </a>
                            </div>
                            -->


                            <span editable-text="group.name" e-name="name" e-form="rowform" onbeforesave="checkName($data)" e-required>
                                <a href="http://localhost:9000/#/groups/{{group.id}}">
                                    {{ group.name }}
                                </a>
                            </span>


                            <!-- Descripcion, de momento no lo creo necesario 
                                <p style="font-size: 15px" editable-text="group.description" e-name="description" e-form="rowform" onbeforesave="checkName($data)" e-required>
                                    {{ group.description }}
                                </p>
                                -->

                            </br>

                            <!-- BOTONES PARA ELIMINAR O MODIFICAR (NO FUNCIONAL TODABIA) LOS GRUPOS -->

                            <!--Boton con confirmación estilo navegador -->

                            <button type="button" class="btn btn-primary btn-xs" ng-click="unFollowGroup(group.id, group.name)">
                                <span class="glyphicon glyphicon-remove"></span>
                            </button>
                            <button type="button" class="btn btn-primary btn-xs" ng-click="editGroup(group.id, group.name, group.description)">
                                <span class="glyphicon glyphicon-edit"></span>
                            </button>


                            <!--Boton con confirmación estilo boostrap (No funciona con angular todabia)
                                <a class="glyphicon glyphicon-plus-sign" data-toggle="modal" data-target="#UnFollowGroup"></a>
                                -->

                        </center>
                    </div>
                </div>
            </div>


            <!-- CARTA PARA AÑADIR UN GRUPO -->

            <div class="col-md-2">
                <div class="thumbnail">
                    <div id="cardinfo">

                        <center>

                            <img src="images/groups/mas.jpg" alt="Image group" height="100%" width="100%" ondragstart="return false" onselectstart="return false" oncontextmenu="return false" />Añadir grupo

                        </center>

                    </div>
                    <div id="addgroup">

                        <center>

                            <button type="button" class="btn btn-primary btn-xs" data-toggle="modal" data-target="#CrearGrupo">
                                <span class="glyphicon glyphicon-plus-sign" data-toggle="modal" data-target="#CrearGrupo"></span>
                            </button>

                        </center>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Si no hay ningún grupo creado -->
    <div ng-hide="groups.length != []">

        <div id="tutorial">
            <div class="title-tutorial">
                <div>
                    <center>
                        <h1>¿Aún no tienes ningún grupo?
                            <br>¡Crea uno en TripBox!</h1>
                    </center>
                </div>
            </div>

            <div class="tutorial">
                <div class="row-fluid">

                    <div class="col-md-2 col-md-offset-5">
                        <div class="fleche-left">
                            <img src="images/system/groups/flechas1/flechaleft.png" height="150" width="200" ondragstart="return false" onselectstart="return false" oncontextmenu="return false" />
                        </div>
                       
                        <div class="cardtuto">
                            <div class="thumbnail">
                                <div id="cardinfo">

                                    <center>

                                        <img src="images/groups/mas.jpg" alt="Image group" height="100%" width="100%" ondragstart="return false" onselectstart="return false" oncontextmenu="return false" />Añadir grupo

                                    </center>

                                </div>
                                <div id="addgroup">

                                    <center>

                                        <button type="button" class="btn btn-primary btn-xs" data-toggle="modal" data-target="#CrearGrupo">
                                            <span class="glyphicon glyphicon-plus-sign" data-toggle="modal" data-target="#CrearGrupo"></span>
                                        </button>

                                    </center>
                                </div>
                            </div>
                        </div>
                        <div class="fleche-right">
                            <img src="images/system/groups/flechas1/flecharight.png" height="150" width="200" ondragstart="return false" onselectstart="return false" oncontextmenu="return false" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MENUS DESPLEGABLES -->

    <!-- MENU PARA CREAR GRUPO -->
    <div class="modal fade" id="CrearGrupo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">

                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>

                    <h4 class="modal-title" id="myModalLabel">Crea un nuevo grupo</h4>

                </div>
                <form name="formAddGroup" novalidate ng-submit="addGroupForm()">
                    <div class="modal-body">
                        <div class="input-group">

                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-pencil"></span>
                            </span>
                            <fieldset>
                                <input type="text" class="form-control" placeholder="Nombre del grupo (obligatorio)" name="nombre" ng-model="newGroup.name" required>

                            </fieldset>

                        </div>
                        <div class="error" ng-show="formAddGroup.nombre.$dirty && formAddGroup.nombre.$invalid">
                            <small class="error" ng-show="formAddGroup.nombre.$error.required">
                                El grupo necesita un nombre.
                            </small>
                        </div>
                        </br>
                        <div class="input-group">

                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-comment"></span>
                            </span>
                            <fieldset>
                                <input type="text" class="form-control" placeholder="Descripción del grupo (obligatorio)" name="descripcion" ng-model="newGroup.description" required>
                            </fieldset>

                        </div>
                        <div class="error" ng-show="formAddGroup.descripcion.$dirty && formAddGroup.descripcion.$invalid">
                            <small class="error" ng-show="formAddGroup.descripcion.$error.required">
                                Por favor, haz una descripción breve del grupo.
                            </small>
                        </div>
                        </br>
                        <div class="input-group">

                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-picture"></span>
                            </span>
                            <input type="text" class="form-control" placeholder="Nueva imagen">

                        </div>
                    </div>
                    <div class="modal-footer">

                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>

                        <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="addGroup(newGroup)" ng-disabled="formAddGroup.$invalid">Crear</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


<!-- MENU PARA ELIMINAR GRUPO -->
            
    <script type="text/ng-template" id="unFollowGroupModalContent.html">
    
        <div class="modal-header">
           
            <button type="button" class="close" ng-click="cancel()">&times;</button>
            <h4 class="modal-title" id="myModalLabel">Confirmar eliminación</h4>
        
        </div>
        <div class="modal-body">
            
            <div class="input-group">
               
                ¿Estás seguro de que quieres eliminar "{{groupName}}" definitivamente de tu lista de grupos?
            
            </div>

        </div>
        <div class="modal-footer">
            
            <button type="button" class="btn btn-default" ng-click="cancel()">Cancelar</button>
            <button type="button" class="btn btn-primary" ng-click="confirmUnFollow()">Abandonar</button>
            
        </div>
    
    </script>


    <!-- MENU PARA MODIFICAR GRUPO (EN DESARROLLO)-->

    <script type="text/ng-template" id="editGroupModalContent.html">
    
        <div class="modal-header">
    
            <button type="button" class="close" ng-click="cancel()">&times;</button>
            <h4 class="modal-title" id="myModalLabel">Edición de Grupo {{groupName}}</h4>
      
        </div>
        <form name="formModGroup" novalidate ng-submit="modGroupForm()">
            <div class="modal-body">
         
                <div class="input-group">

                    <span class="input-group-addon">
                        <span class="glyphicon glyphicon-pencil"></span>
                    </span>
                    <fieldset>
                        <input type="text" class="form-control" placeholder="Nombre del grupo" ng-model="groupName" name="nombre" required>
                    </fieldset>
                </div>
                <div class="error" ng-show="formModGroup.nombre.$dirty && formModGroup.nombre.$invalid">
                            <small class="error" ng-show="formModGroup.nombre.$error.required">
                                El grupo necesita un nombre.
                            </small>
                        </div>
                </br>

                <div class="input-group">
                            
                    <span class="input-group-addon">
                        <span class="glyphicon glyphicon-comment"></span>
                    </span>
                               
                    <fieldset> 
                        <input type="text" class="form-control" placeholder="Descripción del grupo" ng-model="groupDescription" name="descripcion" required>
                    </fieldset>
                    
                </div>
                <div class="error" ng-show="formModGroup.descripcion.$dirty && formModGroup.descripcion.$invalid">
                    <small class="error" ng-show="formModGroup.descripcion.$error.required">
                        Por favor, haz una descripción breve del grupo.
                    </small>
                </div>

                </br>

                <div class="input-group">
                        
                    <span class="input-group-addon">
                        <span class="glyphicon glyphicon-picture"></span>
                    </span>
                        
                    <input type="text" class="form-control" placeholder="Nueva imagen">
                    
                </div>

            </div>

            <div class="modal-footer">
                    
                    <button type="button" class="btn btn-default" ng-click="cancel()">Cancelar</button>
                    <button type="button" class="btn btn-primary" ng-click="confirmEdit(groupName, groupDescription)" ng-disabled="formModGroup.$invalid">Editar</button>
                    
            </div>
        </form>
    </script>

</div>